Songify

Songify is implemented using Python Django framework with postgresql database to store the data

Installation Requirments:

1. Create a virtual environment, activate it and install the required packages using requirements.txt
        `virtualenv env`
        `source env/bin/activate`
        `pip install -r requirements.txt`
    Python 3.7 version is used
2. Install postgresql database and start the postgres server using the command
        `pg_ctl -D /usr/local/var/postgres start`
    It can be stopped using the following command
        `pg_ctl -D /usr/local/var/postgres stop`
3. Run the migrations (migrations will create tables from the models) using the following commands
        `python manage.py makemigrations`
        `python manage.py migrate`
    Make sure you are in the folder where manage.py script is present (src/songify/song/)
4. Start the server using the following command
        `python manage.py runserver`
    The server starts running on `127.0.0.1:8000`
5. Postman would be handy to test the endpoints
6. Any IDE to review the code (I prefer Visual Studio Code)
7. Django has admin console that can be accessed using any browser to view the model data and 
   perform the same database operations (Create, view and delete) 

Database Schema:

1. A single table is created for the application
2. The table is `Song` with the following fields
        id (Auto generated Field, primary key, integer)
        name (Character Field with max length of 50)
        slug (Auto slug field prepopulated from the `name` field)
        artist (Array field with characters (each length of 15))
        album (Character field with max length of 50)
        length (Integer field, song length should be in seconds)

    (name, album) is the composite key which should be unique

Creating, retrieving and deleting songs:

Songs can created in two ways. The database interaction happens using the static methods
in DatabaseFunctions of database.py script. Also assign appropriate roles to the postgres user to 
perform database functions. The Http Response is generated by another static method BuildResult
of result.py script. Logic to check the constraints is included in the view.

Using django admin console: 

1. From the browser, enter the url `http://127.0.0.1:8000/admin`
2. Enter the login credentials as below. You can also fing them in settings.py file
        `username: songifyuser`
        `password: mysongify`
3. Navigate to Favourite Songs in Song and click on `add favourite songs` in the top right corner
4. Enter the fields. artist field should be entered comma separated (Ex: Drake, Meek Mill)
5. After saving the song, the added song can be viewed in the Favourite songs console
6. A song can be selected and deleted from action drop down on the same console

Using Postman:

1. Using the end points, a song can be added, retrieved and deleted
2. Created end points in post man and then started developing the application adhering
   Test Driven Development (TDD). 
3. Following end points can be saved on the postman and test it
        1. POST method  - `http://127.0.0.1:8000/song/name/`
        2. Request body should contain the informatin in the below format
                {
	                "name": "Going Bad",
	                "artist": "{Drake, Meek Mill}",
	                "album": "Guide",
	                "length": 300
                }
            `artist` should be in an array as shown. Even a single artist should be in an array
        2. GET method - `http://127.0.0.1:8000/song/name/`
        3. No query parameters results in fetching list of all songs like ["Going Bad", "No guidance", "Roar"]
        4. `http://127.0.0.1:8000/song/name?id=2` will fetch songs by id
        5. `http://127.0.0.1:8000/song/name?name=Going%20%Bad` will fetch by name
        6. `http://127.0.0.1:8000/song/name?match_string=going` will fetch a list of matching songs
            by match string that is case insensitive like ["Going Bad", "Going Home"]
        7. `http://127.0.0.1:8000/song/artist?id=2` will fetch list of artists of the song by id like
            ["Drake", "Meek Mill"]
        8. `http://127.0.0.1:8000/song/artist?name=Going%20%Bad` will fetch the list of artists of 
            the song by name (name can be case insensitive)
        9. DELETE methd - Similarly as GET urls, a song can be deleted by id or name(exact name should be given)

Unit tests:

1. Few unit tests for the endpoints and the database funtions are created.
2. These unit tests can be run using the following command
        `python manage.py test song.tests.SongViewTests`

TODO:

1. Features such as user authentication and user profiles can be created
2. Each user profile can have a favourite list
3. Logging the database transactions and server traffic using new relic or Kibana
4. Set up monitoring to check the traffic, database memory and usage
5. Containerize the application using docker and deploy it using Kubernetes or ECS
   services for high availability and scalability
6. Modify the database schema based on the new features for reusability and easy
   maintainance 
7. Serializers can be implemented to retrieve the data in various formats like JSON, XML etc..
